define(["exports","./vaadin-dir-helper.js"],function(_exports,_vaadinDirHelper){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.DirMixin=void 0;function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=babelHelpers.getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=babelHelpers.getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return babelHelpers.possibleConstructorReturn(this,result)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(e){return!1}}/**
 * Array of Vaadin custom element classes that have been subscribed to the dir changes.
 */var directionSubscribers=[],directionUpdater=function directionUpdater(){var documentDir=getDocumentDir();directionSubscribers.forEach(function(element){alignDirs(element,documentDir)})},scrollType,directionObserver=new MutationObserver(directionUpdater);directionObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});var alignDirs=function alignDirs(element,documentDir){if(documentDir){element.setAttribute("dir",documentDir)}else{element.removeAttribute("dir")}},getDocumentDir=function getDocumentDir(){return document.documentElement.getAttribute("dir")},DirMixin=function DirMixin(superClass){return/*#__PURE__*/function(_superClass){babelHelpers.inherits(VaadinDirMixin,_superClass);var _super=_createSuper(VaadinDirMixin);function VaadinDirMixin(){babelHelpers.classCallCheck(this,VaadinDirMixin);return _super.apply(this,arguments)}babelHelpers.createClass(VaadinDirMixin,[{key:"connectedCallback",/** @protected */value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinDirMixin.prototype),"connectedCallback",this).call(this);if(!this.hasAttribute("dir")){this.__subscribe();alignDirs(this,getDocumentDir())}}/** @protected */},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinDirMixin.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue);if("dir"!==name){return}// New value equals to the document direction and the element is not subscribed to the changes
var newValueEqlDocDir=newValue===getDocumentDir()&&-1===directionSubscribers.indexOf(this),newValueEmptied=!newValue&&oldValue&&-1===directionSubscribers.indexOf(this),newDiffValue=newValue!==getDocumentDir()&&oldValue===getDocumentDir();// Value was emptied and the element is not subscribed to the changes
if(newValueEqlDocDir||newValueEmptied){this.__subscribe();alignDirs(this,getDocumentDir())}else if(newDiffValue){this.__subscribe(!1)}}/** @protected */},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinDirMixin.prototype),"disconnectedCallback",this).call(this);this.__subscribe(!1);this.removeAttribute("dir")}/** @private */},{key:"__subscribe",value:function __subscribe(){var push=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;if(push){-1===directionSubscribers.indexOf(this)&&directionSubscribers.push(this)}else{-1<directionSubscribers.indexOf(this)&&directionSubscribers.splice(directionSubscribers.indexOf(this),1)}}/**
   * @param {Element} element
   * @return {number}
   * @protected
   */},{key:"__getNormalizedScrollLeft",value:function __getNormalizedScrollLeft(element){return _vaadinDirHelper.DirHelper.getNormalizedScrollLeft(scrollType,this.getAttribute("dir")||"ltr",element)}/**
   * @param {Element} element
   * @param {number} scrollLeft
   * @protected
   */},{key:"__setNormalizedScrollLeft",value:function __setNormalizedScrollLeft(element,scrollLeft){return _vaadinDirHelper.DirHelper.setNormalizedScrollLeft(scrollType,this.getAttribute("dir")||"ltr",element,scrollLeft)}}],[{key:"finalize",/** @protected */value:function finalize(){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinDirMixin),"finalize",this).call(this);if(!scrollType){scrollType=_vaadinDirHelper.DirHelper.detectScrollType()}}},{key:"properties",get:function get(){return{/**
       * @protected
       */dir:{type:String,readOnly:!0}}}}]);return VaadinDirMixin}(superClass)};_exports.DirMixin=DirMixin});