define(["exports","../../../lit-element/lit-element.js","../../../lit-html/lib/render.js","../../../lit-html/directives/unsafe-html.js","./simple-popover-manager.js"],function(_exports,_litElement,_render,_unsafeHtml,_simplePopoverManager){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SimplePopoverSelection=void 0;function _templateObject3_0c8e83f0812d11eb9c332bb120816628(){var data=babelHelpers.taggedTemplateLiteral(["<slot name=\"button\"></slot>"]);_templateObject3_0c8e83f0812d11eb9c332bb120816628=function _templateObject3_0c8e83f0812d11eb9c332bb120816628(){return data};return data}function _templateObject2_0c8e83f0812d11eb9c332bb120816628(){var data=babelHelpers.taggedTemplateLiteral(["",""]);_templateObject2_0c8e83f0812d11eb9c332bb120816628=function _templateObject2_0c8e83f0812d11eb9c332bb120816628(){return data};return data}function _templateObject_0c8e83f0812d11eb9c332bb120816628(){var data=babelHelpers.taggedTemplateLiteral(["","",""]);_templateObject_0c8e83f0812d11eb9c332bb120816628=function _templateObject_0c8e83f0812d11eb9c332bb120816628(){return data};return data}var SimplePopoverSelection=/*#__PURE__*/function(_LitElement){babelHelpers.inherits(SimplePopoverSelection,_LitElement);function SimplePopoverSelection(){var _this;babelHelpers.classCallCheck(this,SimplePopoverSelection);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SimplePopoverSelection).call(this));_this.disabled=!1;return _this}babelHelpers.createClass(SimplePopoverSelection,[{key:"openedToggle",value:function openedToggle(e){if(!this.disabled){this.opened=!this.opened}}},{key:"openedChanged",value:function openedChanged(state){var _this2=this;if(state){var div=document.createElement("div");(0,_render.render)(div,window.SimplePopoverManager.requestAvailability());var slot=this.querySelectorAll("[slot=\"options\"]");// account for nesting in a single option area
if(1===slot.length&&slot[0].children&&1===slot[0].children.length&&"SLOT"===slot[0].children[0].tagName){slot=slot[0].children[0].assignedNodes({flatten:!0})}for(var i in slot){if(slot[i].cloneNode&&slot[i].tagName){var clone=slot[i].cloneNode(!0);clone.removeAttribute("slot");div.appendChild(clone)}}var content;// support for slot injected styles
// this allows you to inject a style local to the manager's pop up
// which means you can style things that otherwise would be impossible
// due to how shadowDOM + things at the app level / singleton would allow
if(this.querySelector("[slot=\"style\"]")){var styleData=this.querySelector("[slot=\"style\"]").cloneNode(!0),style=document.createElement("style");style.innerHTML=styleData.innerHTML;content=(0,_litElement.html)(_templateObject_0c8e83f0812d11eb9c332bb120816628(),(0,_unsafeHtml.unsafeHTML)(div.innerHTML),(0,_unsafeHtml.unsafeHTML)(style.outerHTML))}else{content=(0,_litElement.html)(_templateObject2_0c8e83f0812d11eb9c332bb120816628(),(0,_unsafeHtml.unsafeHTML)(div.innerHTML))}(0,_render.render)(content,window.SimplePopoverManager.requestAvailability());// delay for render
setTimeout(function(){// walk kids in the element and apply event listeners back to here
var children=window.SimplePopoverManager.requestAvailability().querySelectorAll("*");for(var i in children){if(children[i].addEventListener){children[i].addEventListener("click",_this2.itemSelect.bind(_this2))}}// select the item we were told to activate OR just the 1st element
if(window.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]")){window.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]").focus()}else if(window.SimplePopoverManager.requestAvailability()&&window.SimplePopoverManager.requestAvailability().querySelector(":first-child")){window.SimplePopoverManager.requestAvailability().querySelector(":first-child").focus()}},0)}window.SimplePopoverManager.requestAvailability().setPopover(this,this.querySelector("[slot=\"button\"]"),state)}/**
   * The manager called and its time to pack it up. We got a better offer from someone else
   * to maintain the state of the singleton and thus, you no longer matter. Please pack up
   * your bags and don't let the door hit ya.
   */},{key:"managerReset",value:function managerReset(){this.opened=!1}},{key:"updated",value:function updated(changedProperties){var _this3=this;changedProperties.forEach(function(oldValue,propName){if("opened"==propName&&_this3.shadowRoot){_this3.openedChanged(_this3[propName])}})}},{key:"itemSelect",value:function itemSelect(e){var _this4=this;// allow someone else deal with the item changing
this.dispatchEvent(new CustomEvent("simple-popover-selection-changed",{bubbles:!0,detail:e.target}));// close after an item is selected
this.opened=!1;setTimeout(function(){window.SimplePopoverManager.requestAvailability().setPopover(_this4,_this4.querySelector("[slot=\"button\"]"),!1);_this4.querySelector("[slot=\"button\"]").focus()},0)}},{key:"firstUpdated",value:function firstUpdated(){this.addEventListener("click",this.openedToggle.bind(this))}},{key:"render",value:function render(){return(0,_litElement.html)(_templateObject3_0c8e83f0812d11eb9c332bb120816628())}}],[{key:"properties",get:function get(){return{opened:{type:Boolean,reflect:!0},/**
       * disabled state
       */disabled:{type:Boolean,reflect:!0}}}}]);return SimplePopoverSelection}(_litElement.LitElement);_exports.SimplePopoverSelection=SimplePopoverSelection;customElements.define("simple-popover-selection",SimplePopoverSelection)});