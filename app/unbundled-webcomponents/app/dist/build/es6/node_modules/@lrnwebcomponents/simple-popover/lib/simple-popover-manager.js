import{html,css,LitElement}from"../../../lit-element/lit-element.js";import"../simple-popover.js";class SimplePopoverManager extends LitElement{constructor(){super(),this.popover=null,this.opened=!1,this.context=null,this.orientation="tb",this.position="bottom",this.__ignore=!1}static get styles(){return[css`
        simple-popover {
          font-size: 14px;
          line-height: 20px;
          color: black;
          --simple-popover-color: #222222;
          --simple-popover-border-color: #222222;
          --simple-popover-background-color: #eeeeee;
          --simple-popover-padding: 4px;
          max-width: var(--simple-popover-manager-max-width, 200px);
        }
      `]}render(){return html`
      <simple-popover
        auto
        part="simple-popover"
        ?hidden="${!this.opened}"
        position="${this.position}"
      >
        <slot></slot>
      </simple-popover>
    `}static get properties(){return{position:{type:String},opened:{type:Boolean},orientation:{type:String}}}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{["opened","position","orientation"].includes(propName)&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.popover.updatePosition()},0))})}setPopover(context,el,opened=null,orientation="tb"){if(this.__ignore)this.__ignore=!1,setTimeout(()=>{this.popover.updatePosition()},100);else{let position;el!==this.popover.target&&(this.context&&this.context.managerReset&&context!==this.context&&(this.context.managerReset(),this.__ignore=!0),this.context=context,this.popover.target=null,this.popover.target=el);let menu=el.getBoundingClientRect();position="tb"==orientation?menu.y>window.innerHeight/2?"top":"bottom":menu.x>window.innerWidth/2?"left":"right",this.orientation=orientation,this.position=position,null!=opened&&(this.opened=opened)}}firstUpdated(){this.popover=this.shadowRoot.querySelector("simple-popover")}}customElements.define("simple-popover-manager",SimplePopoverManager);export{SimplePopoverManager};window.SimplePopoverManager=window.SimplePopoverManager||{},window.SimplePopoverManager.requestAvailability=()=>(window.SimplePopoverManager.instance||(window.SimplePopoverManager.instance=document.createElement("simple-popover-manager"),document.body.appendChild(window.SimplePopoverManager.instance)),window.SimplePopoverManager.instance),window.SimplePopoverManager.requestAvailability();