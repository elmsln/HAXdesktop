import{LitElement,html,css}from"../../../lit-element/lit-element.js";import"../../simple-icon/lib/simple-icon-lite.js";import"./hax-toolbar-item.js";import"../../simple-popover/lib/simple-popover-selection.js";import{HAXStore}from"./hax-store.js";import{autorun,toJS}from"../../../mobx/dist/mobx.esm.js";class HaxToolbarMenu extends LitElement{static get styles(){return[css`
        :host {
          display: block;
          box-sizing: border-box;
        }
        simple-icon-lite {
          --simple-icon-height: 10px;
          --simple-icon-width: 10px;
          margin-left: -2px;
        }
        .flip-icon {
          transform: rotateY(180deg);
        }
      `]}render(){return html`
      <simple-popover-selection
        @simple-popover-selection-changed="${this.selectedChanged}"
        ?disabled="${this.disabled}"
        auto
        orientation="tb"
      >
        <div slot="style">
          simple-popover-manager hax-context-item { overflow: hidden; display:
          flex; } simple-popover-manager { --simple-popover-padding: 0; }
          hax-context-item-textop[hidden] { opacity: 0; display: none;
          visibility: hidden; }
        </div>
        <hax-toolbar-item
          ?mini="${this.mini}"
          ?disabled="${this.disabled}"
          ?action="${this.action}"
          slot="button"
          icon="${this.icon}"
          .hidden="${!this.icon}"
          .class="${this.iconClass}"
          tooltip="${this.tooltip}"
        >
          <simple-icon-lite icon="hax:expand-more"></simple-icon-lite>
        </hax-toolbar-item>
        <div slot="options">
          <slot></slot>
        </div>
      </simple-popover-selection>
    `}selectedChanged(e){this.shadowRoot.querySelector("simple-popover-selection").opened=!1,this.selected=e.detail.value}static get tag(){return"hax-toolbar-menu"}constructor(){super(),this.corner="",this.action=!1,this.disabled=!1,this.tooltip="",this.tooltipDirection="",this.selected=0,setTimeout(()=>{this.addEventListener("click",this._menubuttonTap.bind(this))},0),autorun(()=>{toJS(HAXStore.editMode),toJS(HAXStore.activeNode);this.shadowRoot&&this.shadowRoot.querySelector("simple-popover-selection")&&(this.shadowRoot.querySelector("simple-popover-selection").opened=!1)})}static get properties(){return{corner:{type:String,reflect:!0},disabled:{type:Boolean,reflect:!0},mini:{type:Boolean,reflect:!0},action:{type:Boolean},icon:{type:String},tooltip:{type:String},tooltipDirection:{type:String,attribute:"tooltip-direction"},selected:{type:Number}}}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"selected"==propName&&this.dispatchEvent(new CustomEvent("selected-changed",{detail:this[propName]}))})}_menubuttonTap(e){this.disabled||(this.selected="")}}window.customElements.define(HaxToolbarMenu.tag,HaxToolbarMenu);export{HaxToolbarMenu};