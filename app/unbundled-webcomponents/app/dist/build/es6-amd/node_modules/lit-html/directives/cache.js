define(["exports","../lib/template-instance.js","../lit-html.js"],(function(_exports,_templateInstance,_litHtml){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.cache=void 0;
/**
   * @license
   * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
   * This code may only be used under the BSD style license found at
   * http://polymer.github.io/LICENSE.txt
   * The complete set of authors may be found at
   * http://polymer.github.io/AUTHORS.txt
   * The complete set of contributors may be found at
   * http://polymer.github.io/CONTRIBUTORS.txt
   * Code distributed by Google as part of the polymer project is also
   * subject to an additional IP rights grant found at
   * http://polymer.github.io/PATENTS.txt
   */
const templateCaches=new WeakMap,cache=(0,_litHtml.directive)(value=>part=>{if(!(part instanceof _litHtml.NodePart))throw new Error("cache can only be used in text bindings");let templateCache=templateCaches.get(part);void 0===templateCache&&(templateCache=new WeakMap,templateCaches.set(part,templateCache));const previousValue=part.value;if(previousValue instanceof _templateInstance.TemplateInstance){if(value instanceof _litHtml.TemplateResult&&previousValue.template===part.options.templateFactory(value))return void part.setValue(value);{let cachedTemplate=templateCache.get(previousValue.template);void 0===cachedTemplate&&(cachedTemplate={instance:previousValue,nodes:document.createDocumentFragment()},templateCache.set(previousValue.template,cachedTemplate)),(0,_litHtml.reparentNodes)(cachedTemplate.nodes,part.startNode.nextSibling,part.endNode)}}if(value instanceof _litHtml.TemplateResult){const template=part.options.templateFactory(value),cachedTemplate=templateCache.get(template);void 0!==cachedTemplate&&(part.setValue(cachedTemplate.nodes),part.commit(),part.value=cachedTemplate.instance)}part.setValue(value)});_exports.cache=cache}));