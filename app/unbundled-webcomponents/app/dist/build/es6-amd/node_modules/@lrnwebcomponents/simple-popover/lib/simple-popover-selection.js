define(["exports","../../../lit-element/lit-element.js","../../../lit-html/lib/render.js","../../../lit-html/directives/unsafe-html.js","./simple-popover-manager.js"],(function(_exports,_litElement,_render,_unsafeHtml,_simplePopoverManager){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.SimplePopoverSelection=void 0;class SimplePopoverSelection extends _litElement.LitElement{constructor(){super(),this.disabled=!1}openedToggle(e){this.disabled||(this.opened=!this.opened)}openedChanged(state){if(state){let div=document.createElement("div");(0,_render.render)(div,window.SimplePopoverManager.requestAvailability());let content,slot=this.querySelectorAll('[slot="options"]');for(var i in 1===slot.length&&slot[0].children&&1===slot[0].children.length&&"SLOT"===slot[0].children[0].tagName&&(slot=slot[0].children[0].assignedNodes({flatten:!0})),slot)if(slot[i].cloneNode&&slot[i].tagName){let clone=slot[i].cloneNode(!0);clone.removeAttribute("slot"),div.appendChild(clone)}if(this.querySelector('[slot="style"]')){let styleData=this.querySelector('[slot="style"]').cloneNode(!0),style=document.createElement("style");style.innerHTML=styleData.innerHTML,content=_litElement.html`${(0,_unsafeHtml.unsafeHTML)(div.innerHTML)}${(0,_unsafeHtml.unsafeHTML)(style.outerHTML)}`}else content=_litElement.html`${(0,_unsafeHtml.unsafeHTML)(div.innerHTML)}`;(0,_render.render)(content,window.SimplePopoverManager.requestAvailability()),setTimeout(()=>{let children=window.SimplePopoverManager.requestAvailability().querySelectorAll("*");for(var i in children)children[i].addEventListener&&children[i].addEventListener("click",this.itemSelect.bind(this));window.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]")?window.SimplePopoverManager.requestAvailability().querySelector("[data-simple-popover-selection-active]").focus():window.SimplePopoverManager.requestAvailability()&&window.SimplePopoverManager.requestAvailability().querySelector(":first-child")&&window.SimplePopoverManager.requestAvailability().querySelector(":first-child").focus()},0)}window.SimplePopoverManager.requestAvailability().setPopover(this,this.querySelector('[slot="button"]'),state)}managerReset(){this.opened=!1}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"opened"==propName&&this.shadowRoot&&this.openedChanged(this[propName])})}itemSelect(e){this.dispatchEvent(new CustomEvent("simple-popover-selection-changed",{bubbles:!0,detail:e.target})),this.opened=!1,setTimeout(()=>{window.SimplePopoverManager.requestAvailability().setPopover(this,this.querySelector('[slot="button"]'),!1),this.querySelector('[slot="button"]').focus()},0)}static get properties(){return{opened:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0}}}firstUpdated(){this.addEventListener("click",this.openedToggle.bind(this))}render(){return _litElement.html`<slot name="button"></slot>`}}_exports.SimplePopoverSelection=SimplePopoverSelection,customElements.define("simple-popover-selection",SimplePopoverSelection)}));